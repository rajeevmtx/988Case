<template>
    <div class="slds-theme_default slds-scrollable_y">
        <div class=" slds-section slds-is-open">
            <h3 class="slds-section__title slds-theme_shade">
                <span class="slds-truncate slds-p-horizontal_small headerStyle" title="Referral Creation">Referral
                    Creation</span>
            </h3></br>
            <div aria-hidden="false" class="slds-section__content">
                <b>Type of Referral</b>
                <lightning-combobox name="reffVal" options={referralOptions} onchange={handleReferralChange}>
                </lightning-combobox></br>

                <b>Notes</b>
                <lightning-textarea name="notes" onchange={handleNotesChange}></lightning-textarea></br>

                <b>Referral Outcome</b>
                <lightning-combobox name="refOutcome" value={outcomeValue} options={referralOutcome}
                    onchange={handleOutcomeChange}>
                </lightning-combobox></br>

                <b>Program</b>
                <lightning-combobox name="program" options={programOptions} onchange={handleProgramChange}
                    value={programValue}>
                </lightning-combobox></br>
                </br>

                <lightning-record-view-form object-api-name="Case" record-id={caseId}>
                    <lightning-card  variant="Narrow"  title="Personal Information" icon-name="standard:log_a_call">
                        <p class="slds-p-horizontal_small slds-box">
                        <lightning-layout>
                            <lightning-layout-item size="4">
                                <lightning-output-field field-name="First_Name__c">
                                </lightning-output-field>
                            </lightning-layout-item>
                            <lightning-layout-item size="4">
                                <lightning-output-field field-name="Middle_Name__c">
                                </lightning-output-field>
                            </lightning-layout-item>
                            <lightning-layout-item size="4">
                                <lightning-output-field field-name="Last_Name__c">
                                </lightning-output-field>
                            </lightning-layout-item>
                        </lightning-layout>
                        </br>
                        <b>Location of the Incident</b>
                        <lightning-formatted-address address-label="Location of the Incident"
                                street-label="Street" city-label="City" country-label="Country"
                                province-label="Province" postal-code-label="PostalCode"
                                street={addressData.Street_Address__c} city={addressData.City__c}
                                country={addressData.County__c} province={addressData.Province__c}
                                postal-code={addressData.Zip_Code__c}
                                onchange={onAddressChange} disabled>
                                </lightning-formatted-address>
                        </p>
                    </lightning-card>
                </lightning-record-view-form>
                </br>
                <button class="slds-button slds-button_brand" onclick={onBackClick}>Back</button>
                <button class="slds-button slds-button_neutral" onclick={onSubmit}>Submit</button>
                <button class="slds-button slds-button_destructive" onclick={onClose}>Save and Close</button>
                </br>
                </br>
                <template if:true={hasReferral}>
                    <h3 class="slds-section__title slds-theme_shade">
                        <span class="slds-truncate slds-p-horizontal_small headerStyle"
                            title="Referrals">Referrals</span>
                    </h3></br>
                    <template for:each={recordId} for:item="rec">
                        <div key={rec.Id}>
                            <lightning-record-view-form record-id={rec.Id} object-api-name="Case">
                                <div class="slds-grid">
                                    <div class="slds-col slds-size_1-of-4">
                                        <span>
                                            <lightning-output-field field-name="CaseNumber">
                                            </lightning-output-field>
                                        </span>
                                    </div>
                                    <div class="slds-col slds-size_1-of-4">
                                        <span>
                                            <lightning-output-field field-name="Referral_Outcome__c">
                                            </lightning-output-field>
                                        </span>
                                    </div>
                                    <div class="slds-col slds-size_1-of-4">
                                        <span>
                                            <lightning-output-field field-name="Program__c">
                                            </lightning-output-field>
                                        </span>
                                    </div>
                                    <div class="slds-col slds-size_1-of-4">
                                        <span>
                                            <lightning-output-field field-name="Type_of_Referral__c">
                                            </lightning-output-field>
                                        </span>
                                    </div>
                                </div>
                            </lightning-record-view-form>
                        </div>
                    </template>
                </template>
            </div>
        </div>
    </div>
</template>